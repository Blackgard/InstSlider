(()=>{"use strict";class e{constructor(e,t){this.touchstartX=0,this.touchstartY=0,this.touchendX=0,this.touchendY=0,this.elem_trigger=e,this.fire_after_trigger={left:()=>{},right:()=>{},top:()=>{},bottom:()=>{},tap:()=>{},...t},this.add_event_listener(this.elem_trigger)}add_event_listener(e){e.addEventListener("touchstart",(e=>{this.touchstartX=e.changedTouches[0].screenX,this.touchstartY=e.changedTouches[0].screenY}),!1),e.addEventListener("touchend",(e=>{this.touchendX=e.changedTouches[0].screenX,this.touchendY=e.changedTouches[0].screenY,this.handle_gesture()}),!1)}handle_gesture(){const e=this.touchendX-this.touchstartX,t=this.touchendY-this.touchstartY;return Math.abs(e)>Math.abs(t)?e>0?this.fire_after_trigger.right():this.fire_after_trigger.left():Math.abs(e)<Math.abs(t)?t>0?this.fire_after_trigger.bottom():this.fire_after_trigger.top():this.fire_after_trigger.tap()}}var t=function(){return(t=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var d in t=arguments[i])Object.prototype.hasOwnProperty.call(t,d)&&(e[d]=t[d]);return e}).apply(this,arguments)},i=function(e,t){for(var i=0,s=t.length,d=e.length;i<s;i++,d++)e[d]=t[i];return e};const s=function(){function s(e){var t=this;this.settings=this._create_global_settings(e),this.sliders={},this.sliders_keys=[],this.count_sliders=0,this.prev_slider_id=!1,this.active_slider_id=!1,this.next_slider_id=!1,this.settings.sliders_container.insertAdjacentHTML("afterend","<div id='sliders-styles'><style></style></div>"),this.settings.sliders_style=document.getElementById("sliders-styles").firstElementChild,e.sliders.forEach((function(e){var i=t._get_settings_slider(e);t._create_nav_slider(i.id),t.sliders[i.id]=t._create_new_slider(i),t._create_menu_slider(t.sliders[i.id]),t._create_thumb_slider(t.sliders[i.id]),t._add_slider_handler_click(t.sliders[i.id]),t._activate_first_slide(t.sliders[i.id]),t._processing_slide_items(t.sliders[i.id]),t.count_sliders++,t.sliders_keys.push(i.id)})),this.settings.sliders_bg_modal_close.addEventListener("click",(function(){return t._hide_all_slider()})),this.settings.debug&&console.log(this)}return s.prototype._create_global_settings=function(e){var i=t({sliders_container_class:".slider-container",sliders_bg_modal_class:".bg-modal",sliders_bg_modal_close_class:".icon-close",sliders_header_class:".slide-header",sliders_border_color_viewed:"#e7e7e7",loop:!1,debug:!1,time_view_slide:5e3,sliders:[]},e);return t({sliders_container:document.getElementsByClassName(i.sliders_container_class.replace(".",""))[0],sliders_bg_modal:document.getElementsByClassName(i.sliders_bg_modal_class.replace(".",""))[0],sliders_bg_modal_close:document.getElementsByClassName(i.sliders_bg_modal_close_class.replace(".",""))[0]},i)},s.prototype._get_settings_slider=function(e){var i={id:""};return"object"==typeof e?t(t({},i),e):"string"==typeof e?{id:e}:i},s.prototype._create_new_slider=function(e){var t=this,s=document.getElementById(e.id.toString()),d=document.querySelector('[data-slider-history-id-on-click="'+e.id+'"]'),r=document.getElementById(e.id.toString()).querySelector("[data-slide-items-container]"),l=document.getElementById(e.id.toString()).querySelector(this.settings.sliders_header_class),a=l.querySelector(".slide-thumb"),n=l.querySelector(".slide-menu"),_=l.querySelector(".slide-next"),o=l.querySelector(".slide-prev");return{id:e.id,active:e.active||!0,is_view:e.is_view||!1,is_viewed:!1,is_first_slide:0==e.active_slide_number,is_last_slide:e.active_slide_number>=r.childElementCount,prev_slide_id:NaN,active_slide_id:e.active_slide_number||0,next_slide_id:NaN,count_sliders:r.childElementCount,trigger_container:d,slider_container:s,header:{container:l,items:l.querySelectorAll("*"),thumb:{container:a,items:null},menu:{container:n,items:null},next:{container:_},prev:{container:o}},slides:{container:r,count:r.childElementCount,items:r.querySelectorAll("[data-slide-item]"),auto_slide:i([],Array.from(r.querySelectorAll(".item"))).map((function(e){return{active:!0,timeout:void 0,time:t.settings.time_view_slide}})),items_type:[],is_click_slide:!1},show:function(){return t.show(e.id)},hide:function(){return t.hide(e.id)},next_slide:function(){return t.next_slide(e.id)},prev_slide:function(){return t.prev_slide(e.id)},activate_auto_slide:function(){return t._activate_auto_slide(e.id)}}},s.prototype._create_nav_slider=function(e){var t=document.createElement("div");t.className=this.settings.sliders_header_class.replace(".",""),t.innerHTML='<nav class="slide-nav"> \n                                <div class="slide-thumb"></div>\n                                <div class="slide-menu"></div>\n                                <button class="slide-prev"><-</button>\n                                <button class="slide-next">-></button>\n                            </nav>',document.getElementById(e).insertAdjacentHTML("afterbegin",t.outerHTML)},s.prototype._create_menu_slider=function(e){var t=e.trigger_container.querySelectorAll("[data-slide-img]")[0].cloneNode(!0),i=e.trigger_container.querySelectorAll("[data-slide-title]")[0].cloneNode(!0);if(t&&i){t.classList.remove(t.classList.toString()),i.classList.remove(i.classList.toString()),t.classList.add("menu__img"),i.classList.add("menu__name");var s=t.outerHTML+" "+i.outerHTML;e.header.menu.container.insertAdjacentHTML("afterbegin",s)}},s.prototype._create_thumb_slider=function(e){for(var t=0;t<e.count_sliders;t++){var i=document.createElement("span");i.classList.add("item"),i.dataset.thumbSlideId=e.id+"_"+t,e.header.thumb.container.innerHTML+=i.outerHTML}e.header.thumb.items=e.header.thumb.container.querySelectorAll("*")},s.prototype._activate_first_slide=function(e){e.slides.items[0].classList.add("active")},s.prototype._add_slider_handler_click=function(t){var i=this;new e(t.header.container,{top:function(){return i._hide_all_slider()},left:function(){return t.next_slide()},right:function(){return t.prev_slide()}}),t.trigger_container.addEventListener("click",(function(){return t.show()})),t.header.next.container.addEventListener("click",(function(){return t.next_slide()})),t.header.prev.container.addEventListener("click",(function(){return t.prev_slide()}))},s.prototype._set_to_style_animate_duration=function(e,t){this.settings.sliders_style.insertAdjacentHTML("beforeend",".slide-thumb .item[data-thumb-slide-id="+e+"].active::after { animation-duration: "+t+"; }")},s.prototype._processing_slide_items=function(e){var t=this;e.slides.items.forEach((function(i,s){var d=i,r=e.header.thumb.items[s];({html:function(){r.dataset.timeDuration=e.slides.auto_slide[s].time+"ms",t._set_to_style_animate_duration(r.dataset.thumbSlideId,r.dataset.timeDuration),e.slides.items_type.push("html")},image:function(){r.dataset.timeDuration=e.slides.auto_slide[s].time+"ms",t._set_to_style_animate_duration(r.dataset.thumbSlideId,r.dataset.timeDuration),e.slides.items_type.push("image")},video:function(){var i=d.getElementsByTagName("video")[0];i.onloadedmetadata=function(){e.slides.auto_slide[s].time=1e3*i.duration,r.dataset.timeDuration=1e3*i.duration+"ms",t._set_to_style_animate_duration(r.dataset.thumbSlideId,r.dataset.timeDuration)},e.slides.items_type.push("video")},text:function(){r.dataset.timeDuration=e.slides.auto_slide[s].time+"ms",t._set_to_style_animate_duration(r.dataset.thumbSlideId,r.dataset.timeDuration),e.slides.items_type.push("text")},default:function(){console.error("Not found this type slide | get type: "+d.dataset.slideItemType,i),e.slides.items_type.push("default")}})[d.dataset.slideItemType||"default"]()}))},s.prototype._hide_all_slider=function(){var e=this,t=function(t){i.sliders[t].is_view&&i.sliders[t].hide(),i.sliders[t].slides.items_type.includes("video")&&i.sliders[t].slides.items_type.map((function(i,s){if("video"==i){var d=e.sliders[t].slides.items[s].getElementsByTagName("video")[0];d.pause(),d.currentTime=0}}))},i=this;for(var s in this.sliders)t(s);this.active_slider_id=!1,this.settings.sliders_container.classList.remove("active")},s.prototype._activate_slide=function(e,t,i){e.slides.items[t].classList.remove("active"),e.header.thumb.items[t].classList.remove("active"),e.header.thumb.items.forEach((function(e,t){var s=e;t>=i?s.classList.remove("viewed"):s.classList.add("viewed")})),e.slides.items[i].classList.add("active"),e.header.thumb.items[i].classList.add("active"),e.active_slide_id=i,e.slides.auto_slide[e.active_slide_id].active&&e.activate_auto_slide(),i+1>=e.slides.count?e.is_last_slide=!0:e.is_last_slide=!1,e.is_first_slide=i-1<0,this._start_active_slide(e)},s.prototype._activate_auto_slide=function(e){var t=this.sliders[e];t.slides.auto_slide.forEach((function(e){return clearTimeout(e.timeout)})),t.slides.auto_slide[t.active_slide_id].timeout=setTimeout(t.next_slide,t.slides.auto_slide[t.active_slide_id].time)},s.prototype._get_next_slider_id=function(e){var t=this.sliders_keys[Object.keys(this.sliders).indexOf(e)+1];return!t&&this.settings.hasOwnProperty("loop")&&this.settings.loop&&(t=Object.keys(this.sliders)[0]),t},s.prototype._get_prev_slider_id=function(e){var t=this.sliders_keys[Object.keys(this.sliders).indexOf(e)-1];return!t&&this.settings.hasOwnProperty("loop")&&this.settings.loop&&(t=Object.keys(this.sliders)[this.count_sliders-1]),t},s.prototype._set_status_is_viewed_slider=function(e){e.is_viewed=!0,e.trigger_container.querySelector("[data-slide-border]").getElementsByTagName("svg")[0].style.stroke=this.settings.sliders_border_color_viewed},s.prototype._start_active_slide=function(e){e.slides.items_type.forEach((function(t,i){if("video"===t){var s=e.slides.items[e.active_slide_id].getElementsByTagName("video")[0];s.play(),i!==e.active_slide_id&&(s.currentTime=0)}}))},s.prototype.next_slide=function(e){var t=this.sliders[e];if(!t.is_view)return this._hide_all_slider(),void t.show();if((this.next_slider_id==this.active_slider_id||!this.next_slider_id)&&t.is_last_slide&&!this.settings.loop)return this._hide_all_slider(),void this._set_status_is_viewed_slider(t);if(t.is_last_slide){t.hide(),this._set_status_is_viewed_slider(t);var i=t.header.thumb.items[t.header.thumb.items.length-1];return i.classList.remove("active"),i.classList.add("viewed"),void("string"==typeof this.next_slider_id&&this.sliders[this.next_slider_id].show())}t.next_slide_id=t.active_slide_id+1<t.slides.items.length?t.active_slide_id+1:0,t.prev_slide_id=t.active_slide_id-1>=0?t.active_slide_id-1:t.slides.items.length-1,this._activate_slide(t,t.active_slide_id,t.next_slide_id)},s.prototype.prev_slide=function(e){var t=this.sliders[e];if(!t.is_view)return this._hide_all_slider(),void t.show();if(t.is_first_slide){if(!this.prev_slider_id)return;t.hide(),this._set_status_is_viewed_slider(t);var i=t.header.thumb.items[0];return i.classList.remove("active"),i.classList.add("viewed"),void("string"==typeof this.prev_slider_id&&this.sliders[this.prev_slider_id].show())}null==this.prev_slider_id&&this._hide_all_slider(),t.next_slide_id=t.active_slide_id+1<t.slides.items.length?t.active_slide_id+1:0,t.prev_slide_id=t.active_slide_id-1>=0?t.active_slide_id-1:t.slides.items.length-1,this._activate_slide(t,t.active_slide_id,t.prev_slide_id)},s.prototype.show=function(e){this._hide_all_slider(),this.settings.sliders_container.classList.add("active"),this.active_slider_id=e,this.sliders[e].is_view=!0,this.sliders[e].slider_container.classList.add("slider-active"),this._activate_slide(this.sliders[e],0,this.sliders[e].active_slide_id);var t=this._get_next_slider_id(e),i=this._get_prev_slider_id(e);t&&(this.sliders[t].slider_container.classList.add("slider-next"),this.next_slider_id=t),i&&(this.sliders[i].slider_container.classList.add("slider-prev"),this.prev_slider_id=i)},s.prototype.hide=function(e){var t=this,i=this.sliders[e];clearTimeout(i.slides.auto_slide[i.active_slide_id].timeout),i.is_view=!1,i.slider_container.classList.remove("slider-active"),i.header.thumb.items.forEach((function(e){return e.parentElement.classList.remove("active")})),Object.keys(this.sliders).forEach((function(e){t.sliders[e].slider_container.classList.remove("slider-next"),t.sliders[e].slider_container.classList.remove("slider-prev")}))},s}();window.InstSlider=s})();